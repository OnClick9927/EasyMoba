BattlePlayMode = {
    Normal = 1,
    Local = 2,
    Recorder = 4,
}

Battle = {}
Battle.for_cs_call = require("Battle.BattleForCSCall")

Battle.world = require("Battle.Logic.LogicWord")
Battle.net_input = require("Battle.NetInput")
Battle.frame_collection = require("Battle.Logic.FrameCollection")
Battle.logic = require("Battle.Logic.BattleLogic")

---@type number[]
local _players = nil
local mode_server

---@param battle_mode any
---@param room_id string
---@param players number[]
function Battle.StartGame(battle_mode, room_id, room_type, players)
    _players = players
    local _role_id = Models.PlayerModel:GetRoleID()
    local collision_cfg

    mode_server = CS.EasyMoba.BattleModePlayer.Create(battle_mode, room_type, players)
    Battle.net_input.Start(_role_id, room_id, mode_server)
    Battle.frame_collection.Start()
    Battle.world.Start(collision_cfg)
    Battle.logic.LoadScene()
end

function Battle.CloseGame()
    Battle.net_input.Dispose()
    Battle.frame_collection.Dispose()
    Battle.world.Dispose()
    mode_server:Dispose()
end
